#!/bin/bash
ERROR=1
if [ $# -ne 2 ]; then
  echo "usage: $0 <vcfFile> <format>
  format denotes whether this is a vcf file generated by samtools or by GATK.
  Therefore, format must be either sam or gatk
  " && exit ${ERROR}
fi


vcf=$1
format=$2

sam="sam"
gatk="gatk"
if [ "${format}" = "${sam}" ]; then
  echo "sam format"
elif [ "${format}" = "${gatk}" ]; then
  echo "gatk format"
else
  echo "usage: $0 <vcfFile> <format>
  format denotes whether this is a vcf file generated by samtools or by GATK.
  Therefore, format must be either sam or gatk
  " && exit ${ERROR}
fi


echo QUAL statistics
echo number, mean, min, max, std.dev, skewness, 25%, median, 75%
r=$(grep '#' -v ${vcf} | tabtk num -c6 -Q)
echo -e "\t${r}"

echo "Depth(DP) Statiscs"
r=$(grep '#' -v ${vcf} | awk -F'DP' '{print $2}' | awk -F'[=;]' '{print $2}' | tabtk num -c1 -Q)
echo -e "\t${r}"

echo "RMS(Root-mean-square) Quality Statiscs"
r=$(grep '#' -v ${vcf} |  awk -F'MQ' '{print $2}' | awk -F'[=;]' '{print $2}' | tabtk num -c1 -Q)
echo -e "\t${r}"

echo format is: ${format}

if [ "${format}" = "${sam}" ]; then
  echo "sam format"
else
  echo "Quality by depth Statiscs"
  r=$(grep '#' -v ${vcf} | awk -F'QD' '{print $2}' | awk -F'[=;]' '{print $2}' | tabtk num -c1 -Q)
  echo -e "\t${r}"
fi


#echo "RMS(Root-mean-square) Quality Statiscs"
#r=$(grep '#' -v ${vcf} |  awk -F'MQ' '{print $2}' | awk -F'[=;]' '{print $2}' | tabtk num -c1 -Q)
#echo -e "\t${r}"

